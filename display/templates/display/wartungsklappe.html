{% extends "display/base.html" %}

{% load static %}
{% block content %}

{% load thumbnail %}

{% if request.user.is_staff %}

<h1 class="f1 lh-title">Unter der Haube des m√§chtigen Info-Displays im Dorfgemeinschaftshaus!</h1>


    <h3 class="f3 lh-copy">Neue Banner hochladen:</h3>
<div class="">Maximal 5 MB je Bild bitte. Einfach hier abwerfen reicht. Profis bearbeiten nachher noch die Details.</div>
<form action="{% url "wartungsklappe" %}" method="post" enctype="multipart/form-data" class="dropzone" id="banner">
    {% csrf_token %}
    <!-- input type="submit" value="Verbannern" -->
</form>

<script>
  Dropzone.options.banner = { // camelized version of the `id`
    paramName: "file", // The name that will be used to transfer the file
    maxFilesize: 5, // MB
      acceptedFiles: 'image/*',
      capture: "camera"
  };
</script>

<h3 class="f3 lh-copy">Banner bearbeiten:</h3>
    <ul class="list pa0">
    {% for b in banner %}
        {% thumbnail b.image "100x100" crop="center" as im %}
        <li>
            <a class="link dt w-100 bb b--black-05 pb2 mt2" href="{% url "banneredit" b.pk %}">
                    <div class="dtc w2 w3-ns v-mid">
                                    <img src="{{ im.url }}" alt="{{  b.title}}">
                    </div>
                    <div class="dtc v-mid pl3">
                        {{ b.title }}
                    </div>
            </a></li>
        {% endthumbnail %}
    {% endfor %}
    </ul>


{% if new_calendars %}
<h3 class="f3 lh-copy">Kalender verkn√ºpfen:</h3>
<form action="{% url 'wartungsklappe' %}" method="post">
{% csrf_token %}
<ul class="list pa0">
    {% for cid, summary in new_calendars %}
        <li class="flex items-center mb2"><input class="mr2" type="radio" value="{{ cid }}" id="new_{{ cid }}" name="connect_calendar"><label class="lh-copy" for="new_{{ cid }}">{{ summary }}</label></li>
    {% endfor %}
</ul>
<input type="submit" value="Kalender verkn√ºpfen" name="connect">
</form>
{% endif %}
{% if connected_calendars %}
<h3 class="f3 lh-copy">Verkn√ºpfung aufheben:</h3>
<form action="{% url 'wartungsklappe' %}" method="post">
{% csrf_token %}

<ul class="list pa0">
    {% for cid, cal in connected_calendars %}
        <li class="flex items-center mb2"><input  class="mr2" type="radio" value="{{ cid }}" id="connected_{{ cid }}" name="disconnect_calendar"><label for="connected_{{ cid }}" class="lh-copy">{{ cal.summary }} [{{ cal.user }}]</label></li>
    {% endfor %}
</ul>
<input type="submit" value="Verkn√ºpfung aufheben" name="disconnect">
</form>
{% endif %}
{% else %}
    <p class="lh-copy">Nee. Du bist leider (noch?) nicht w√ºrdig. Melde Dich bei einer Aufsichtsperson, dass diese sich doch bitte an Peter wenden soll mit der Bitte</p>
    <h1>{{ request.user }}</h1>
    <p>zu benedeien.</p>
{% endif %}
<h3 class="f3 lh-copy">Cache l√∂schen:</h3>
<form method="post">
    {% csrf_token %}
    <input type="submit" value="Nuke! üí•" name="nuke">
</form>
    <p class="lh-copy">
    √Ñnderungen werden erst nach gewisser Zeit sichtbar. Mit diesem Knopf, werden √Ñnderungen schneller √ºbernommen. Beim echten Display dauert es trotzdem ein paar Minuten, bis es sich √§ndert.
    </p>

<h3 class="f3 lh-copy ">Erkl√§rungen:</h3>
    <div class="bg-black-10 pa2">
    <p class="lh-copy">
        Alle angekn√ºpften Kalender sind gleichberechtigt. Alle Kalender-Ereignisse werden zusammengemischt.
    </p>
    <p class="lh-copy">
        Kalender-Ereignisse mit ‚è∞ werden bei "Ausblick" angezeigt. F√ºr besonders wichtige Gro√üereignisse, die schon lange im Voraus angek√ºndigt werden sollen.
    </p>
    <p class="lh-copy">
        Kalender-Ereignisse mit üö∏ sind Ereignisse der Jugend. Derzeit √§ndert das nur die Schriftart.
    </p>
    <p class="lh-copy">
        Das n√§chste Kalender-Ereigniss mit üéâ ist ein ganz ganz ganz besonderes Ereigniss, f√ºr welches der "Noch...bis" Bildschirm angezeigt wird.
    </p>
    </div>
{% endblock %}
